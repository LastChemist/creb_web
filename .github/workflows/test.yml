name: Test Application

on:
  push:
    branches: ["main", "develop"]
  pull_request:
    branches: ["main"]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
      
      - name: Verify files
        run: |
          echo "ğŸ“ Checking project structure..."
          ls -la
          echo "ğŸ“„ Required files check:"
          [ -f "index.html" ] && echo "âœ… index.html exists" || echo "âŒ index.html missing"
          [ -f "package.json" ] && echo "âœ… package.json exists" || echo "âŒ package.json missing"
          [ -d "js" ] && echo "âœ… js directory exists" || echo "âŒ js directory missing"
          [ -d "css" ] && echo "âœ… css directory exists" || echo "âŒ css directory missing"
      
      - name: Install dependencies
        run: npm ci
      
      - name: HTML Validation (basic)
        run: |
          echo "ğŸ” Checking HTML structure..."
          if grep -q "<!DOCTYPE html>" index.html; then
            echo "âœ… DOCTYPE found"
          else
            echo "âš ï¸  DOCTYPE not found"
          fi
          
          if grep -q "<title>" index.html; then
            echo "âœ… Title tag found"
          else
            echo "âš ï¸  Title tag not found"
          fi
      
      - name: JS Syntax Check
        run: |
          echo "ğŸ” Checking JavaScript files..."
          for js_file in js/*.js; do
            if [ -f "$js_file" ]; then
              echo "Checking $js_file..."
              node -c "$js_file" && echo "âœ… Syntax OK" || echo "âŒ Syntax error"
            fi
          done
